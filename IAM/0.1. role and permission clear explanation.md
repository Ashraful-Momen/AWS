

---

## ЁЯзй 1я╕ПтГг IAM-ржПрж░ ржорзВрж▓ ржзрж╛рж░ржгрж╛ (User, Group, Role, Policy)

```
+---------------------------------------------------+
|                   AWS Account                     |
|---------------------------------------------------|
|  Users   тЖТ  ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ User (developer, admin)  |
|  Groups  тЖТ  User ржЧрзБрж▓рзЛрж░ logical group               |
|  Roles   тЖТ  Temporary permission identity          |
|  PoliciesтЖТ  Permission rules (JSON format)         |
+---------------------------------------------------+
```

рждрзБржорж┐ permission handle ржХрж░ржмрзЗ **policy attach ржХрж░рзЗ**
тЖТ **User / Group / Role** -ржПрж░ рж╕рж╛ржерзЗред

---

## ЁЯзн 2я╕ПтГг Policy attach ржХрж░рж╛рж░ рзйржЯрж╛ ржкрзНрж░ржзрж╛ржи ржЙржкрж╛рзЯ

| Attach Method    | ржХрж╛ржХрзЗ attach рж╣рзЯ  | ржмрзНржпржмрж╣рж╛рж░                                                         |
| ---------------- | --------------- | --------------------------------------------------------------- |
| **User Policy**  | Individual user | ржПржХржЬржи ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржЙржЬрж╛рж░рзЗрж░ ржЬржирзНржп ржмрж┐рж╢рзЗрж╖ ржкрж╛рж░ржорж┐рж╢ржи                       |
| **Group Policy** | User group      | ржПржХрж╕рж╛ржерзЗ ржПржХрж╛ржзрж┐ржХ ржЗржЙржЬрж╛рж░ржХрзЗ ржПржХржЗ ржкрж╛рж░ржорж┐рж╢ржи ржжрж┐рждрзЗ                          |
| **Role Policy**  | Role            | AWS Service (ржпрзЗржоржи EC2, Lambda, CodePipeline) ржХрзЗ permission ржжрж┐рждрзЗ |

---

## тЪЩя╕П 3я╕ПтГг Diagram тАУ User, Group, Role, Policy рж╕ржорзНржкрж░рзНржХ

```
             +----------------------+
             |  IAM Policy (JSON)   |
             +----------------------+
                 ^          ^
                 |          |
        +--------+----+  +--+----------------+
        | IAM User     |  | IAM Role (for EC2|
        | (developer)  |  | or other service)|
        +--------------+  +------------------+
                 ^
                 |
        +--------+--------+
        | IAM Group (Team)|
        +-----------------+
```

---

## ЁЯза 4я╕ПтГг ржПржЦржи ржмрж╛рж╕рзНрждржмрзЗ ржХрж┐ржнрж╛ржмрзЗ attach ржХрж░рж╛ ржпрж╛рзЯ ЁЯСЗ

---

### ЁЯзй A. **User-based Permission**

(рж╕рж░рж╛рж╕рж░рж┐ user-ржП attach ржХрж░рж╛ рж╣рзЯ)

тЮбя╕П Path:
**IAM тЖТ Users тЖТ (select user) тЖТ Permissions тЖТ Add permissions**

рждрзБржорж┐ ржПржЦрж╛ржирзЗ ржХрж░рждрзЗ ржкрж╛рж░рзЛ:

1. **Attach existing policy directly** (ржпрзЗржоржи: `AmazonS3FullAccess`)
2. **Add user to group** (ржпржжрж┐ group already permission ржкрж╛рзЯ)
3. **Create inline policy** (custom JSON only for this user)

ЁЯз╛ Example (S3 only for this user)

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": "*"
    }
  ]
}
```

---

### ЁЯзй B. **Group-based Permission**

(ржПржХрж╛ржзрж┐ржХ user-ржПрж░ ржЬржирзНржп ржПржХ policy)

тЮбя╕П Path:
**IAM тЖТ Groups тЖТ Create Group тЖТ Attach Policy (e.g. S3FullAccess)**
рждрж╛рж░ржкрж░ ржЗржЙржЬрж╛рж░ржжрзЗрж░ ржУржЗ ржЧрзНрж░рзБржкрзЗ ржпрзЛржЧ ржХрж░рзЛред

```
+---------------------+
| Group: S3Admins     |
|---------------------|
| Attached Policy:    |
| AmazonS3FullAccess  |
+---------------------+
         |
         +--> user1
         +--> user2
```

ЁЯСЙ ржПржЦржи group-ржПрж░ policy ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж▓рзЗ рж╕ржм user-ржПрж░ permission auto update рж╣ржмрзЗ тЬЕ

---

### ЁЯзй C. **Role-based Permission**

(ржпржЦржи AWS service ржирж┐ржЬрзЗржЗ permission ржкрж╛рзЯ)

тЮбя╕П Path:
**IAM тЖТ Roles тЖТ Create Role тЖТ Choose trusted entity (e.g. EC2)**
тЖТ рждрж╛рж░ржкрж░ attach ржХрж░рзЛ **policy (e.g. S3FullAccess)**
тЖТ ржПрж░ржкрж░ ржУржЗ Role ржЯрж╛ EC2 instance-ржП attach ржХрж░рзЛред

```
EC2 Instance ----> IAM Role (EC2S3AccessRole)
                          |
                          v
                  Policy: AmazonS3FullAccess
```

ржПржЦржи EC2-ржПрж░ ржнрзЗрждрж░ ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛ржмрзЗ:

```bash
aws s3 ls
aws s3 cp file.txt s3://mybucket/
```

ржХрзЛржирзЛ access key ржЫрж╛рзЬрж╛ржЗ тЬЕ

---

### ЁЯзй D. **Service Role (for Pipeline, Lambda, etc.)**

ржпрзЗржоржи, рждрзБржорж┐ ржпржжрж┐ **AWS CodePipeline** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ тАФ
CodePipeline ржирж┐ржЬрзЗржЗ ржПржХржЯрж┐ **service role** ржирзЗрзЯ ржпрж╛рждрзЗ
тЖТ CodeBuild, S3, EC2, CloudWatch ржЗрждрзНржпрж╛ржжрж┐ рждрзЗ access ржирж┐рждрзЗ ржкрж╛рж░рзЗред

```
CodePipeline ---> IAM Role ---> Policy ---> Resources (S3, EC2, RDS)
```

---

## ЁЯкЬ 5я╕ПтГг Policy attach ржХрж░рж╛рж░ 4ржЯрж┐ ржмрж╛рж╕рзНрждржм Option (summary)

| # | Where attach  | Example use case                | Access Type  |
| - | ------------- | ------------------------------- | ------------ |
| 1 | User          | Developer needs EC2 access only | Direct       |
| 2 | Group         | DevOps team gets EC2 + S3       | Group        |
| 3 | Role          | EC2 needs to read/write S3      | Service role |
| 4 | Inline Policy | Temporary custom rule           | Manual JSON  |

---

## ЁЯФР 6я╕ПтГг Bonus: CLI ржжрж┐рзЯрзЗ attach ржХрж░рж╛рж░ ржкржжрзНржзрждрж┐

**Attach Managed Policy to a User:**

```bash
aws iam attach-user-policy \
  --user-name dev_user \
  --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
```

**Attach Managed Policy to a Role:**

```bash
aws iam attach-role-policy \
  --role-name EC2S3AccessRole \
  --policy-arn arn:aws:iam::aws:policy/AmazonS3FullAccess
```

---

## ЁЯТб 7я╕ПтГг рж╕рж╣ржЬ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржлрж░рзНржорзБрж▓рж╛:

```
User  тЖТ  Human
Group тЖТ  Team
Role  тЖТ  Machine/Service
PolicyтЖТ  Permission Rule
```

---
